<!DOCTYPE HTML>
<TITLE>Tetris</TITLE>
<LINK REL="stylesheet" HREF="https://webdevkit.net/styles.css">

<!-- GLOBALS -->
<SCRIPT>
function $(selector) {
	return document.querySelectorAll(selector);
}
function listen(element, types, listener, options) {
	types = types.split(" ")
	for (let type of types) element.addEventListener(type, listener, options)
}
</SCRIPT>

<!-- MOUSE -->
<SCRIPT>
let Mouse = undefined
listen(document, "click mousemove", (event) => {
	Mouse = {
		update(event) {
			Mouse.x = Math.round(event.clientX / window.innerWidth * 100) / 100,
			Mouse.y = Math.round(event.clientY / window.innerHeight * 100) / 100
		}
	}
	listen(document, "mousemove", Mouse.update)
	listen(document, "click", Mouse.update)
},	{ once: true })
</SCRIPT>

<STYLE>
:ROOT { --x: 0.5; --y: 0.5; }
#Tetris {
font-family: "IBM Plex Serif", sans-serif; font-size: 2.4vh; line-height: 1.4;
max-width: 80ch; margin: 0 auto; padding: 0 2em 25vh }
#Tetris H1 { text-align: center }
#Tetris HEADER {
min-height: 100vh; transform: translateY(-2em); align-content: center; justify-items: center; display: grid }
#Tetris HEADER H1, #Tetris HEADER H2 { grid-column: 1; grid-row: 1 }
#Tetris HEADER H1, #Tetris HEADER H2 { margin: 0 }
#Tetris HEADER A, #Tetris HEADER IMG { border-radius: 4pt }
#Tetris HEADER H1 IMG { opacity: 0 }
#Tetris HEADER H1 A { background: url("Artwork/Background.jpg"); background-size: contain }
#Tetris HEADER A { display: inline-flex; box-shadow: 0 1em 1em rgba(0,0,0,0.33) }
#Tetris HEADER H1 A::before { content: ""; display: block;
position: absolute; top: 0; left: 0; width: 100%; height: 100%;
background: url("Artwork/Logo Shadow.png") center no-repeat; background-size: 100% 100%; }
#Tetris HEADER H1 A::after { content: ""; display: block;
position: absolute; top: 0; left: 0; width: 100%; height: 100%;
background: url("Artwork/Logo Fill.png") center no-repeat; background-size: 100% 100%; }
#Tetris HEADER A { --stack: 0;  --maxX: 1; --maxY: 1;  --offsetX: calc(var(--x) * 2 - 1); --offsetY: calc(var(--y) * 2 - 1);
box-shadow: calc(var(--offsetX) * var(--maxX) * -1vmin + 0.5vmin)
            calc(var(--offsetY) * var(--maxY) * -1vmin + 0.5vmin)
            2vmin rgba(0,0,0,0.25); 
transition: all 0.5s ease-in-out;
transform: perspective(100vmin)
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg)) }
#Tetris HEADER H1 A::before { --stack: 1 }
#Tetris HEADER H1 A::after { --stack: 2 } 
#Tetris HEADER H1 A::before, #Tetris HEADER A::after {
transform: translateX(calc(var(--stack) * var(--offsetX) * var(--maxX) * 0.1vmin))
           translateY(calc(var(--stack) * var(--offsetY) * var(--maxY) * 0.1vmin)) }
/*
#Tetris HEADER H1 A { /*backface-visibility: hidden;* / opacity: 1;
transform: /*perspective(100vmin) rotateY(0deg)* /
           perspective(100vmin)
			  scaleX(-1)
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg - 180deg)) }
#Tetris HEADER H2 A { backface-visibility: hidden; opacity: -10;
transform: /*perspective(100vmin) rotateY(180deg)* /
			  perspective(100vmin)
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg + 180deg)) }

#Tetris HEADER.hovered H1 { --maxX: 1; --maxY: 1; transform: perspective(100vmin)
           rotateX(calc(var(--offsetY) * var(--maxY) * -1deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 1deg)) }

#Tetris HEADER.hovered H1 A { opacity: -10; transform: perspective(100vmin) scale(-1.25, 1.25)
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg - 0deg)) }
#Tetris HEADER.hovered H2 A { opacity: 1; transform: perspective(100vmin) scale(1.25) 
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg)) }
*/
#Tetris { opacity: 0; transition: opacity 2s; transition-delay: 1s; }
#Tetris.load { opacity: 1 }
#Tetris H1 A { opacity: 1; animation: flipX2 1s ease-in-out; animation-fill-mode: forwards }
#Tetris H2 A { opacity: -1; animation: flipX4 1s ease-in-out; animation-fill-mode:  forwards }
#Tetris HEADER.hovered H1 A { animation: flipX 1s ease-in-out; animation-fill-mode:  forwards }
#Tetris HEADER.hovered H2 A { animation: flipX3 1s ease-in-out; animation-fill-mode:  forwards }

@keyframes flipX {
from { opacity: 1;
	transform: perspective(100vmin) scaleX(-1)
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg - 180deg))
}
to { opacity: 1; 
	transform: perspective(100vmin) scale(-1.25, 1.25)
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg - 0deg)) }
}

@keyframes flipX2 {
from { opacity: 1;
	transform: perspective(100vmin) scale(-1.25, 1.25)
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg - 0deg))
}
to { opacity: 1; 
	transform: perspective(100vmin) scaleX(-1)
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg - 180deg)) }
}

@keyframes flipX3 {
from { opacity: -1;
	transform: perspective(100vmin) scaleX(-1)
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg - 0deg))
}
50% { opacity: -1; }
51% { opacity: 1; }
to { opacity: 1; 
	transform: perspective(100vmin) scale(-1.25, 1.25)
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg + 180deg)) }
}

@keyframes flipX4 {
from { opacity: 1;
	transform: perspective(100vmin) scale(-1.25, 1.25)
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg + 180deg))
}
49% { opacity: 1; }
50% { opacity: -1; }
to { opacity: -1; 
	transform: perspective(100vmin) scaleX(-1)
           rotateX(calc(var(--offsetY) * var(--maxY) * -2deg))
           rotateY(calc(var(--offsetX) * var(--maxX) * 2deg - 0deg)) }
}


/* 
#tetris HEADER A { animation: 11s test linear infinite
#tetris HEADER A::before { animation: 11s stack linear infinite }
#tetris HEADER A::after { --stack: 1.5; animation: 11s stack linear infinite }
@keyframes test {
from { transform: perspective(100vmax) 
                rotateX(calc(var(--offsetX) * var(--maxX) * 1deg)) 
                rotateY(calc(var(--offsetY) * var(--maxY) * -1deg)) }
25% { transform: perspective(100vmax) 
                 rotateX(calc(var(--offsetX) * var(--maxX) * 1deg)) 
                 rotateY(calc(var(--offsetY) * var(--maxY) * 1deg)) }
50% { transform: perspective(100vmax) 
                 rotateX(calc(var(--offsetX) * var(--maxX) * -1deg)) 
                 rotateY(calc(var(--offsetY) * var(--maxY) * 1deg)) }
75% { transform: perspective(100vmax) 
                 rotateX(calc(var(--offsetX) * var(--maxX) * -1deg)) 
                 rotateY(calc(var(--offsetY) * var(--maxY) * 1deg)) }
to { transform: perspective(100vmax) 
                rotateX(calc(var(--offsetX) * var(--maxX) * 1deg)) 
                rotateY(calc(var(--offsetY) * var(--maxY) * -1deg)) }
}
@keyframes stack {
from { transform: translateX(calc(var(--stack) * -2px)) translateY(calc(var(--stack) * 1px)) }
25% { transform: translateX(calc(var(--stack) * 1px)) translateY(calc(var(--stack) * 1px)) }
50% { transform: translateX(calc(var(--stack) * 1px)) translateY(calc(var(--stack) * -2px)) }
75% { transform: translateX(calc(var(--stack) * -2px)) translateY(calc(var(--stack) * -2px)) }
to { transform: translateX(calc(var(--stack) * -2px)) translateY(calc(var(--stack) * 1px)) }
} */
#debug { position: fixed; z-index: 1; top: 0; left: 0; width: 100vw; height: 100vh; padding: 1em; background: transparent; color: var(--color, black); border: none; pointer-events: none;
font-family: "IBM Plex Mono", monospace; font-weight: 100; font-size: 8pt }
</STYLE>
<ARTICLE ID="Tetris">
<HEADER>
<H1><A HREF="Artwork.jpg"><IMG ALT="Tetris" SRC="Artwork.jpg" WIDTH="512" HEIGHT="512"/></A></H1>
<H2><A HREF="Description.jpg"><IMG ALT="From Russia with Fun!" SRC="Description.jpg" WIDTH="512" HEIGHT="512"/></A></H1>
</HEADER>
<SCRIPT>
listen(window, "load", () => { $("#Tetris")[0].classList.add("load") })
listen(document, "mousemove", () => {
	if (!Mouse) return
	document.documentElement.style.setProperty("--x", Mouse.x)
	document.documentElement.style.setProperty("--y", Mouse.y)
})
let timeout
for (let $header of $("#Tetris HEADER A"))
	listen($header, "mouseenter mouseleave", (event) => {
		if (timeout) clearTimeout(timeout)
		setTimeout(() => $("#Tetris HEADER")[0].classList.toggle("hovered", event.type === "mouseenter"), event.type === "mouseenter" ? 1000 : 3000)
	})
</SCRIPT>

<P>Ahhh&hellip; Tetris. “The relentless building block video puzzle” game that launched with Nintendo&rsquo;s Game&nbsp;Boy in 1989.</P>
<P>While the Tetris video game in general has an interesting and complicated history dating back as early as 1984, it was the Nintendo Game&nbsp;Boy version that I have the fondest memories of. Whether it was taking turns to get the high score with my mom, dad and brother or playing under the passing streetlights in the back of our van as we drove home from a family gathering, Tetris will always be one of remembered as one of my favorite video games of all time.</P>

<P>The game&rsquo;s title, &ldquo;Tetris,&rdquo; is a portmanteau of <EM>tetromino</EM> (a shape that is comprised of four blocks, kind of like how a <EM>domino</EM> is a shape made up of two blocks) combined with “tennis”, Pajitnov’s favorite sport.</P>
<!-- <H2><A HREF="Description.jpg"><IMG ALT="From Russia with Fun!" SRC="Description.jpg" WIDTH="512" HEIGHT="512"/></A></H1> -->
</ARTICLE>

<!-- DEBUGGER -->
<DIV ID="debug" STYLE="opacity: 1">&nbsp;</DIV>
<SCRIPT>
let $debug = document.querySelector("#debug");
if ($debug.style.opacity) {
	listen(document, "click mousemove scroll", debug);

	function debug(event) { 
		$debug.innerText = ""
		if (window && window.innerWidth) $debug.innerText += `Window Size X/Y: ${window.innerWidth}, ${window.innerHeight}\n`
		if (window && window.scrollX) $debug.innerText += `Window Scroll X/Y: ${window.scrollX}, ${window.scrollY}\n`
		if (event && event.screenX) $debug.innerText += `Mouse Screen X/Y: ${event.screenX}, ${event.screenY}\n`
		if (event && event.clientX) $debug.innerText += `Mouse Client X/Y: ${event.clientX}, ${event.clientY}\n`
		if (Mouse && Mouse.x) $debug.innerText += `Mouse Normal X/Y: ${Mouse.x}, ${Mouse.y}\n`
		if (Mouse && Mouse.x) $debug.innerText += `Mouse Normal X/Y: ${Mouse.x}, ${Mouse.y}\n`
	}
	debug()
}
</SCRIPT>